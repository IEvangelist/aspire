---
import Default from "@astrojs/starlight/components/ContentPanel.astro";

const isHomepage = Astro.locals.starlightRoute.id === "";
---

{
    isHomepage ? (
        <Default><slot /></Default>

        <div class="stars-container">
            <div class="stars stars-small"></div>
            <div class="stars stars-medium"></div>
            <div class="stars stars-large"></div>
        </div>
    ) : (
        <Default><slot /></Default>
    )
}

<style>
    :root {
        .card-grid .card {
            border-radius: .5rem;
            background: var(--sl-color-bg-nav);
            z-index: 2;
        }
    }

    :root[data-has-hero] {
        .content-panel {
            background: var(--background-gradient);
        }
    }

    .stars-container {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        overflow: hidden;
        z-index: 0;
        pointer-events: none;
    }

    .stars {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: transparent;
        animation: twinkling 7s infinite;
        z-index: 0;
    }

    .stars-small {
        background-image: radial-gradient(
                1px 1px at 10% 10%,
                #fff 50%,
                transparent 70%
            ),
            radial-gradient(
                1px 1px at 25% 15%,
                hsla(0, 0%, 100%, 0.9) 50%,
                transparent 70%
            ),
            radial-gradient(
                1px 1px at 40% 5%,
                hsla(0, 0%, 100%, 0.9) 50%,
                transparent 70%
            ),
            radial-gradient(
                1px 1px at 55% 18%,
                hsla(0, 0%, 100%, 0.9) 50%,
                transparent 70%
            ),
            radial-gradient(
                1px 1px at 70% 8%,
                hsla(0, 0%, 100%, 0.9) 50%,
                transparent 70%
            ),
            radial-gradient(1px 1px at 90% 5%, #fff 50%, transparent 70%),
            radial-gradient(1px 1px at 5% 90%, #fff 50%, transparent 70%),
            radial-gradient(
                1px 1px at 20% 75%,
                hsla(0, 0%, 100%, 0.9) 50%,
                transparent 70%
            ),
            radial-gradient(
                1px 1px at 35% 95%,
                hsla(0, 0%, 100%, 0.9) 50%,
                transparent 70%
            ),
            radial-gradient(
                1px 1px at 60% 82%,
                hsla(0, 0%, 100%, 0.9) 50%,
                transparent 70%
            ),
            radial-gradient(
                1px 1px at 75% 92%,
                hsla(0, 0%, 100%, 0.9) 50%,
                transparent 70%
            ),
            radial-gradient(1px 1px at 95% 90%, #fff 50%, transparent 70%);
        background-size: 300px 300px;
        opacity: 0;
        animation: twinkle-small 6s infinite;
    }

    .stars-medium {
        background-image: radial-gradient(
                1.5px 1.5px at 8% 15%,
                hsla(0, 0%, 100%, 0.9) 50%,
                transparent 70%
            ),
            radial-gradient(
                1.5px 1.5px at 22% 25%,
                hsla(0, 0%, 100%, 0.8) 50%,
                transparent 70%
            ),
            radial-gradient(
                1.5px 1.5px at 45% 5%,
                hsla(0, 0%, 100%, 0.8) 50%,
                transparent 70%
            ),
            radial-gradient(
                1.5px 1.5px at 65% 20%,
                hsla(0, 0%, 100%, 0.8) 50%,
                transparent 70%
            ),
            radial-gradient(
                1.5px 1.5px at 92% 12%,
                hsla(0, 0%, 100%, 0.9) 50%,
                transparent 70%
            ),
            radial-gradient(
                1.5px 1.5px at 12% 88%,
                hsla(0, 0%, 100%, 0.9) 50%,
                transparent 70%
            ),
            radial-gradient(
                1.5px 1.5px at 30% 70%,
                hsla(0, 0%, 100%, 0.8) 50%,
                transparent 70%
            ),
            radial-gradient(
                1.5px 1.5px at 55% 92%,
                hsla(0, 0%, 100%, 0.8) 50%,
                transparent 70%
            ),
            radial-gradient(
                1.5px 1.5px at 72% 85%,
                hsla(0, 0%, 100%, 0.8) 50%,
                transparent 70%
            ),
            radial-gradient(
                1.5px 1.5px at 85% 82%,
                hsla(0, 0%, 100%, 0.9) 50%,
                transparent 70%
            );
        background-size: 400px 400px;
        opacity: 0;
        animation: twinkle-medium 8s 2s infinite;
    }

    .stars-large {
        background-image: radial-gradient(
                2px 2px at 5% 5%,
                hsla(0, 0%, 100%, 0.8) 50%,
                transparent 70%
            ),
            radial-gradient(
                2px 2px at 28% 12%,
                hsla(0, 0%, 100%, 0.7) 50%,
                transparent 70%
            ),
            radial-gradient(
                2px 2px at 50% 8%,
                hsla(0, 0%, 100%, 0.7) 50%,
                transparent 70%
            ),
            radial-gradient(
                2px 2px at 78% 18%,
                hsla(0, 0%, 100%, 0.7) 50%,
                transparent 70%
            ),
            radial-gradient(
                2px 2px at 95% 5%,
                hsla(0, 0%, 100%, 0.8) 50%,
                transparent 70%
            ),
            radial-gradient(
                2px 2px at 5% 95%,
                hsla(0, 0%, 100%, 0.8) 50%,
                transparent 70%
            ),
            radial-gradient(
                2px 2px at 32% 80%,
                hsla(0, 0%, 100%, 0.7) 50%,
                transparent 70%
            ),
            radial-gradient(
                2px 2px at 60% 90%,
                hsla(0, 0%, 100%, 0.7) 50%,
                transparent 70%
            ),
            radial-gradient(
                2px 2px at 82% 85%,
                hsla(0, 0%, 100%, 0.7) 50%,
                transparent 70%
            ),
            radial-gradient(
                2px 2px at 95% 95%,
                hsla(0, 0%, 100%, 0.8) 50%,
                transparent 70%
            );
        background-size: 500px 500px;
        opacity: 0;
        animation: twinkle-large 10s 1s infinite;
    }

    @keyframes twinkle-small {
        0%,
        to {
            opacity: 0;
        }

        25%,
        75% {
            opacity: 0.5;
        }

        50% {
            opacity: 0.7;
        }
    }

    @keyframes twinkle-medium {
        0%,
        to {
            opacity: 0;
        }

        30%,
        70% {
            opacity: 0.4;
        }

        50% {
            opacity: 0.6;
        }
    }

    @keyframes twinkle-large {
        0%,
        to {
            opacity: 0;
        }

        20%,
        80% {
            opacity: 0.3;
        }

        50% {
            opacity: 0.5;
        }
    }

    .stars:before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: radial-gradient(
            circle at 50% 50%,
            transparent 20%,
            var(--hero-bg) 70%
        );
        z-index: 2;
    }
</style>
